# .github/workflows/update-image-tag.yaml

name: Manually Retag Docker Image

on:
  workflow_dispatch:  # Manual trigger only

jobs:
  retag:
    runs-on: ubuntu-latest

    steps:
      - name: Log in to Docker Hub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}

      - name: Pull latest image from Docker Hub
        run: |
          docker pull your-dockerhub-username/java-docker-demo:latest

      - name: Tag image with today's date
        run: |
          DATE=$(date +%Y-%m-%d)
          docker tag your-dockerhub-username/java-docker-demo:latest your-dockerhub-username/java-docker-demo:v:$DATE

      - name: Push new image tag
        run: |
          DATE=$(date +%Y-%m-%d)
          docker push your-dockerhub-username/java-docker-demo:v:$DATE
